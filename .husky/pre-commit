#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo 'ğŸ—ï¸ğŸ‘· Estilizando, testando e construindo seu projeto antes de comitar'

# Check Prettier standards
npm run check-format ||
(
    echo 'ğŸ¤¢ğŸ¤®ğŸ¤¢ğŸ¤® Seu estilo parece quebrado ğŸ¤¢ğŸ¤®ğŸ¤¢ğŸ¤®
            Falha na verificaÃ§Ã£o do Prettier. Execute o yarn format para formatar o arquivo e adicione as alteraÃ§Ãµes no git com o git add . e tente confirmar novamente.';
    false;
)

# Check ESLint Standards
npm run check-lint ||
(
        echo 'ğŸ˜¤ğŸ€ğŸ‘‹ğŸ˜¤ Tire essa coisa fraca daqui! ğŸ˜¤ğŸ€ğŸ‘‹ğŸ˜¤ 
                Falha na verificaÃ§Ã£o do ESLint. FaÃ§a as alteraÃ§Ãµes necessÃ¡rias listadas acima, adicione as alteraÃ§Ãµes e tente confirmar novamente.'
        false; 
)

# Check tsconfig standards
npm run check-types ||
(
    echo 'ğŸ¤¡ğŸ˜‚âŒğŸ¤¡ Falha na verificaÃ§Ã£o de Type. ğŸ¤¡ğŸ˜‚âŒğŸ¤¡
            VocÃª estÃ¡ seriamente tentando escrever isso? FaÃ§a as alteraÃ§Ãµes necessÃ¡rias acima.'
    false;
)

# If everything passes... Now we can commit
echo 'ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”... Tudo bem... O cÃ³digo parece bom para mim... Tentando construir agora. ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”'

npm run build ||
(
    echo 'âŒğŸ‘·ğŸ”¨âŒ Melhor falar com alguÃ©m do time... Porque sua compilaÃ§Ã£o falhou âŒğŸ‘·ğŸ”¨âŒ
            Falha na prÃ³xima compilaÃ§Ã£o: veja os erros acima para ver o por que; 
    '
    false;
)

# If everything passes... Now we can commit
echo 'âœ…âœ…âœ…âœ… O teste passou... comitado com âœ…âœ…âœ…âœ… ... sucesso! âœ…âœ…âœ…âœ…'